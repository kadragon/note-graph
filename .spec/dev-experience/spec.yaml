spec_id: SPEC-devx-1
title: "Test schema parity with migrations"
given_when_then:
  - given: "Vitest runs in the Cloudflare Workers pool with an in-memory D1 database"
    when: "tests initialize the database schema"
    then: "the schema is derived from the latest SQL migrations so repository queries do not fail due to missing columns"
acceptance_tests:
  - id: TEST-devx-1
    desc: "Test setup applies all migrations before executing any test suites"
  - id: TEST-devx-2
    desc: "WorkNoteRepository and PersonRepository tests pass without D1 missing-column errors"
dependencies:
  - governance: "coding-style"
  - governance: "env"
linked_tasks:
  - TASK-028
