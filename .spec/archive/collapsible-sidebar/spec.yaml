spec_id: SPEC-collapsible-sidebar-1
title: "Collapsible Left Sidebar"
description: |
  Add collapsible functionality to the left sidebar with complete hide/show behavior,
  localStorage persistence, and keyboard shortcut support.

given_when_then:
  - given: "User is viewing the application with sidebar visible"
    when: "User clicks the toggle button"
    then: "Sidebar slides off-screen to the left and content area expands to full width"

  - given: "User is viewing the application with sidebar visible"
    when: "User presses Cmd+B (Mac) or Ctrl+B (Windows/Linux)"
    then: "Sidebar slides off-screen to the left and content area expands to full width"

  - given: "Sidebar is collapsed"
    when: "User clicks the toggle button or presses Cmd+B/Ctrl+B"
    then: "Sidebar slides back into view and content area adjusts to accommodate sidebar"

  - given: "Sidebar is collapsed"
    when: "User refreshes the page or reopens the application"
    then: "Sidebar remains collapsed (localStorage persistence)"

  - given: "Sidebar is expanded"
    when: "User refreshes the page or reopens the application"
    then: "Sidebar remains expanded (localStorage persistence)"

acceptance_tests:
  - id: TEST-sidebar-toggle-1
    desc: "Toggle button collapses/expands sidebar with smooth animation"
    steps:
      - "Click toggle button"
      - "Verify sidebar slides off-screen with 300ms animation"
      - "Verify content area expands smoothly"
      - "Click toggle button again"
      - "Verify sidebar slides back with 300ms animation"

  - id: TEST-sidebar-keyboard-1
    desc: "Cmd+B / Ctrl+B keyboard shortcut toggles sidebar"
    steps:
      - "Press Cmd+B (or Ctrl+B on Windows/Linux)"
      - "Verify sidebar collapses"
      - "Press Cmd+B again"
      - "Verify sidebar expands"

  - id: TEST-sidebar-persist-1
    desc: "State persists across page reloads"
    steps:
      - "Collapse sidebar"
      - "Refresh page"
      - "Verify sidebar is still collapsed"
      - "Expand sidebar"
      - "Refresh page"
      - "Verify sidebar is still expanded"

  - id: TEST-sidebar-animation-1
    desc: "Smooth slide animation without jank"
    steps:
      - "Toggle sidebar multiple times"
      - "Verify GPU-accelerated transform animation"
      - "Verify no layout shift or reflow"
      - "Verify 60fps performance"

  - id: TEST-sidebar-accessibility-1
    desc: "Accessibility features work correctly"
    steps:
      - "Verify toggle button has proper ARIA label"
      - "Verify keyboard focus works correctly"
      - "Verify reduced motion preference is respected"
      - "Verify icon changes based on state"

dependencies:
  - governance: "coding-style.md"
  - governance: "patterns.md"

linked_tasks:
  - TASK-sidebar-001
  - TASK-sidebar-002
  - TASK-sidebar-003
  - TASK-sidebar-004
  - TASK-sidebar-005

technical_requirements:
  - "Use transform: translateX(-100%) for collapse animation"
  - "300ms ease-in-out transition timing"
  - "localStorage key: 'sidebar-collapsed'"
  - "Keyboard shortcut: Cmd+B (Mac) / Ctrl+B (Windows/Linux)"
  - "ARIA labels in Korean: '사이드바 열기' / '사이드바 닫기'"
  - "Support prefers-reduced-motion media query"
  - "Sidebar width: 256px (w-sidebar / --spacing-sidebar: 16rem)"

implementation_files:
  create:
    - /apps/web/src/hooks/use-sidebar-collapse.ts
    - /apps/web/src/contexts/sidebar-context.tsx
  modify:
    - /apps/web/src/components/layout/sidebar.tsx
    - /apps/web/src/components/layout/app-layout.tsx
    - /apps/web/src/styles/index.css
